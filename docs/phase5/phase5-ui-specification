# Phase5 UI 仕様書（通知・判定可視化）

## 目的

本 UI は **TradeAssist MVP の最終ユーザー接点**として、
「なぜこの通知が来たのか」「今注目すべきか」を**説明可能な形で可視化**することを目的とする。

本フェーズでは **操作性より理解性を優先**し、
自動売買・強制アクションは一切行わない。

---

## 対象ユーザー

* 裁量トレーダー
* 通知を“判断材料”として利用したいユーザー

---

## 画面一覧

1. 通知一覧画面 `/notifications`
2. 通知ログ詳細画面 `/notifications/:id`

---

## 1. 通知一覧画面 `/notifications`

### 目的

* 現在注目すべき通知を素早く把握する
* 未読・重要度を直感的に判断する

### 表示項目

| 項目            | 内容               |
| ------------- | ---------------- |
| 状態            | 未読 / 既読          |
| sentAt        | 通知送信時刻           |
| symbol        | 通貨ペア             |
| timeframe     | 判定時間足            |
| score         | 一致度スコア（数値 + ゲージ） |
| reasonSummary | 判定理由の要約（1行）      |
| channel       | in_app           |

### UI 要素

* スコアゲージ（0〜1）
* 未読強調表示
* 閾値以上スコアの視覚強調

### 操作

* 行クリック → 詳細画面遷移
* 個別既読切替
* 一括既読

---

## 2. 通知ログ詳細画面 `/notifications/:id`

### 目的

* 通知の根拠を完全に理解できる
* 将来のトレード判断に役立てる

### セクション構成

#### 2.1 通知サマリー

* score
* evaluatedAt（判定時刻）
* sentAt（通知時刻）
* symbol / side / timeframe

---

#### 2.2 判定理由（メイン）

##### 表形式表示

| 特徴量 | ノート時 | 現在 | 差分 | 重み |
| --- | ---- | -- | -- | -- |

##### 日本語理由リスト

* 価格変化が近似している
* トレンド方向が一致している
* ボラティリティが想定範囲内

---

#### 2.3 MarketSnapshot 表示

* 15m / 60m の主要指標
* 数値表示のみ（チャートは不要）

---

#### 2.4 Order Preset 連携

* ブローカー発注画面へのリンク
* 実行は行わない（確認用途のみ）

---

## 3. 共通コンポーネント

### 判定理由可視化コンポーネント

#### 要素

* スコアゲージ
* 特徴量別バー（加点 / 減点）
* 閾値ライン

#### 利用箇所

* 通知一覧
* 通知詳細

---

## 状態管理

* 既読 / 未読
* 表示済みフラグ
* 通知スキップ理由（将来拡張）

---

## 非対応事項（明示）

* 通知設定変更 UI
* Push / Webhook 設定 UI
* トレード自動実行

---

## 設計原則（最重要）

* 判断はユーザーが行う
* UI は説明責任を果たす
* 「当たる」より「納得できる」

---

## 次フェーズ

* Phase5 UI 実装
* デプロイ（Staging → Production）
* Phase6 外部連携拡張
