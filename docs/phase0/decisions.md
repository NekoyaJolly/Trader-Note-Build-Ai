# 主要な設計・技術選定メモ（Phase0 版）

## 採用技術と理由
- Node.js + Express + TypeScript: 既存コードベースを踏襲し、最短で MVP を動作させる
- ファイルベースストレージ: DB 構築コストを削減し、ローカル検証を優先
- OpenAI API (軽量モデル想定): コストと応答速度のバランスを重視し、要約品質を確保
- サードパーティ市場データ API: 自前で価格取得を実装せず、API コールの単純化を狙う
- スケジューラ（15 分間隔）: 高頻度要求がないため、負荷とコストを抑制

## 不採用/保留の代替案
- FastAPI (Python): 型安全性とチーム知見の観点で今回は採用せず。将来サービス分割時に再検討
- データベース（PostgreSQL/TimescaleDB）: 初期セットアップ負荷が高く、MVP のデータ量では過剰。将来移行を前提
- ベクトル DB: ノート件数が少ないため不要。マッチングは単純計算で十分
- 自動売買フロー: 規約違反と安全性リスクのため明確に除外
- Pub/Sub ベースの非同期基盤: 単一ノードで足りるため保留。キュー導入はスケール時に検討

## リスクと割り切り
- ファイルストレージの整合性: 同時書き込みで競合の可能性。MVP ではシリアル実行を前提とし、Phase1 で排他/DB 化を検討
- 外部 API 依存: レイテンシやレートリミットによる遅延リスク。タイムアウト・リトライのガイドを Phase1 で明文化する
- 認証なし API: ローカル環境限定を前提とした割り切り。Phase1 で JWT/キー認証を導入予定
- マッチング精度: 重みや閾値は暫定。ユーザー検証結果を元に再調整を行う
- コスト管理: AI/市場データ API コールが増加するとコストが跳ねる可能性。Scheduler の間隔とキャッシュ戦略で抑制する

## 前提の明文化
- Canvas「TradeAssist MVP まとめ」の用語・重み付けを優先する。差分が発生した場合、本ドキュメントを更新する
- Push 通知プロバイダ・市場データプロバイダの具体選定は Phase1 で確定

## 完成度メモ（80% で停止）
- 重み付け変更のガバナンス（誰がいつ変更できるか）未定
- ロールバック手順やマイグレーション方針は DB 化後に追記予定
