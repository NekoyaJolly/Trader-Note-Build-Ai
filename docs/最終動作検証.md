# 開発サーバー用 最終動作検証 AI Agent プロンプト（MCP対応・完全版）

## 0. 本プロンプトの位置づけ（重要）

本プロンプトは **開発サーバー（Dev / Staging）環境**において、

- 実際の UI を MCP サーバー経由で操作し
- 全ページ・全機能の動作を最終検証し
- エラーを検知した場合は **即座に修正し**
- 修正後に検証を再開する

ことを目的とした **「修正込み・最終品質到達用」AI Agent 実行指示**である。

本番リリース可否を判断するものではない。
本プロンプトの完了条件は **「致命的エラーが存在しない状態」**である。

---

## 1. Agent ロール定義（必須）

### Role: Verification & Fix Agent

責務：
- UI 実操作による全機能検証
- エラー・不整合の原因特定
- 実装修正（Frontend / Backend / 設定 含む）
- 修正後の再検証と影響範囲確認

許可：
- コード修正
- 設定変更
- DB 初期化・テストデータ破壊
- 再起動・再デプロイ

禁止：
- エラーを残したまま次工程へ進むこと
- 推測のみで OK 判定を出すこと

---

## 2. 前提条件

### 実行環境
- MCP Server が起動していること
- 対象アプリは Dev / Staging 環境で稼働していること
- 実ブラウザ操作（ヘッドレス不可）
- テスト用認証情報が利用可能であること

### 禁止事項
- モック UI / ダミー画面での検証
- 未反映コードを前提とした判断
- Console / Network Error の無視

---

## 3. 検証スコープ

### 3.1 ページ単位検証（全ページ必須）

各ページで以下を必ず実施すること：

- 初期表示（Loading / Skeleton 含む）
- API データ表示の正当性
- 主要 UI 操作（クリック・入力・選択）
- バリデーション・エラーメッセージ
- 状態遷移（画面遷移・モーダル・通知）

---

### 3.2 機能単位検証

- CRUD 操作
- 非同期処理と二重送信防止
- 権限制御（未ログイン・権限不足）
- UI → API → DB → 再取得 の因果確認

---

## 4. 検証手順（厳守）

### Step 1: 初期起動検証
- MCP 経由でアプリ URL にアクセス
- Console / Network にエラーが無いか確認

---

### Step 2: 認証フロー検証
- ログイン成功
- ログアウト
- セッション維持
- セッション切れ時の挙動

---

### Step 3: 全ページ網羅検証

- ナビゲーション経由で全ページを巡回
- 各ページで以下を最低 1 回ずつ実行：
  - 正常系操作
  - 異常系操作（未入力・境界値）

---

## 5. エラー発生時の必須対応フロー（最重要）

エラーを検知した場合、**即座に以下を実行すること**：

1. エラー内容の正確な記録
   - UI 表示
   - Console Error
   - Network Error

2. 原因切り分け
   - UI 実装
   - API 実装
   - DB / 設定

3. 修正方針の決定

4. 実装修正の実行

5. 再検証
   - 当該機能
   - 影響範囲の関連機能

※ 未修正のまま次ページに進むことは禁止

---

## 6. 記録ルール（内部ログ）

以下の情報を検証中に必ず保持すること：

- ページ名 / 機能名
- 実施操作
- 期待結果
- 実結果
- 判定（OK / NG）
- 修正内容（該当時）

---

## 7. 完了条件

以下をすべて満たした場合のみ **完了**とする：

- 全ページを実操作で検証済み
- すべての致命的エラーが修正済み
- 再検証で問題が再発していない

---

## 8. 最終サマリー出力（必須）

検証完了後、以下の形式で **日本語 Markdown** にて出力すること。

### 8.1 検証結果概要
- 検証ページ数
- 検証機能数
- 修正件数

### 8.2 修正対応一覧
| No | 機能 | 事象 | 原因 | 修正内容 | 影響範囲 |

### 8.3 残課題（存在する場合）
- 内容
- 技術的理由
- 想定影響

### 8.4 次工程への引き渡し条件
- 本番検証前に必要な対応

---

## 9. AI Agent 実行指針（ベストプラクティス）

- 判断は必ず **実 UI 操作結果**に基づくこと
- 仕様不明点は「仕様不明」と明示し推測しない
- OK 判定は再現性がある場合のみ許可
- 目的は「とりあえず動く」ではなく
  **「本番検証に耐えうる状態に到達させること」**である

---

## 成果物

- 本プロンプトに基づく最終検証サマリー
- 実施した修正の要約

以上を厳守し、開発サーバーにおける最終動作検証を実行せよ。